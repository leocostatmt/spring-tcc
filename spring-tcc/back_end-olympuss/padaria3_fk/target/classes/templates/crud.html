<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!--Bootstrap 5 icons CDN-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <title>CRUD Operations</title>

    <link rel="stylesheet" href="/css/crud.css">
  <body>
    

    <section class="p-3">

        <div class="row">
            <div class="col-12">
                <button class="btn btn-primary newUser" data-bs-toggle="modal" data-bs-target="#userForm">Novo Cliente <i class="bi bi-people"></i></button>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <table class="table table-striped table-hover mt-3 text-center table-bordered">

                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Foto</th>
                            <th>Nome</th>
                            <th>Acesso</th>
                            <th>Senha</th>
                            <th>Email</th>
                            <th>Telefone</th>
                            <th>Tipo de Plano</th>
                            <th>Data de Nascimento</th>
                            <th>Ações</th>
                        </tr>
                    </thead>

                    <tbody id="data">
                    
                     <tr th:each="usuario : ${usuarios}" class="text-center">
	                    <td th:text="${usuario.id}"></td>
	                    <td th:text="${usuario.FOTO}"></td>
	                    <td th:text="${usuario.NOME_COMPLETO}"></td>
	                    <td th:text="${usuario.NIVEL_ACESSO}"></td>
	                    <td th:text="${usuario.SENHA}"></td>
	                    <td th:text="${usuario.EMAIL}"></td>
	                    <td th:text="${usuario.TELEFONE}"></td>
	                    <td th:text="${usuario.plano.NOME}"></td>
	                    <td th:text="${usuario.DATA_NASC}"></td>
	                    <td>
	                    	<a th:href="@{/api/usuario/ver/{id}(id=${usuario.id})}"  
	                    	th:class="'btn btn-sm '+${usuario.NIVEL_ACESSO == 'ATIVO' ? 'btn-primary' : 'btn-warning'}"> Ver </a> 
	                    </td>
	                </tr>
                    
                    </tbody>

                </table>
            </div>
        </div>

    </section>


    <!--Modal Form-->
    <div class="modal fade" id="userForm">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Cadastro</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">

                    <form id="myForm" action="#" enctype="multipart/form-data" 
            				th:action="@{/usuario/salvar}" th:object="${usuario}" method="post">

                        <div class="card imgholder">
                            <label for="imgInput" class="upload">
                                <input type="file" name="" id="imgInput">
                                <i class="bi bi-plus-circle-dotted"></i>
                            </label>
                            <img src="/back_end-olympuss/padaria3_fk/src/main/resources/static/images/2-cachorro-cururu-entenda-a-sindrome-que-causa-encurtamento-em-caes.webp" alt="" width="200" height="200" class="img">
                        </div>

                        <div class="inputField">
                        
                            <div>
                                <label for="name">Nome:</label>
                                <input type="text" name="" id="name" th:field="*{NOME_COMPLETO}" required>
                            </div>
                            
                            <div>
                                <label for="age">Acesso:</label>
                                <input type="text" name="" id="age" th:field="*{NIVEL_ACESSO}" required>
                            </div>
                            
                            <div>
                                <label for="city">Senha:</label>
                                <input type="text" name="" id="city" th:field="*{SENHA}" required>
                            </div>
                            
                            <div>
                                <label for="email">E-mail:</label>
                                <input type="email" name="" id="email" th:field="*{EMAIL}" required>
                            </div>
                            
                            <div>
                                <label for="phone">Número:</label>
                                <input type="text" name="" id="phone" minlength="11" maxlength="11" th:field="*{TELEFONE}" required>
                            </div>
                            
                            <div>
                                <label for="inputCat" class="form-label">Tipos de Plano:</label>
                                <select id="inputCat" th:field="*{plano}" onChange="onstatechange(this)" style="width: 100%;">
                                   <option value="0">Selecione o Plano</option>
                                
                                   <option th:each="plano : ${planos}" th:text="${plano.NOME}" th:value="${plano.id}"></option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="sDate">Data de Nascimento:</label>
                                <input type="date" name="" id="sDate" th:field="*{DATA_NASC}" required>
                            </div>
                            
                        </div>
                        
						<div class="modal-footer">
		                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
		                    <button type="submit" class="btn btn-primary">Submit</button>
		                </div>
		                
                    </form>
                </div>

                
            </div>
        </div>
    </div>

    <!--Read Data Modal-->
    <div class="modal fade" id="readData">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Perfil</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">

                    <form action="#" id="myForm"
                     th:action="@{/usuario/salvar}" th:object="${usuario}" method="post">
                        <div class="card imgholder">
                            <img src="/back_end-olympuss/padaria3_fk/src/main/resources/static/images/2-cachorro-cururu-entenda-a-sindrome-que-causa-encurtamento-em-caes.webp" alt="" width="200" height="200" class="showImg">
                        </div>

                        <div class="inputField">
                            <div>
                                <label for="name">Nome:</label>
                                <input type="text" name="" id="showName" disabled>
                            </div>
                            <div>
                                <label for="age">Status:</label>
                                <input type="text" name="" id="showAge" disabled>
                            </div>
                            <div>
                                <label for="city">Senha:</label>
                                <input type="text" name="" id="showCity" disabled>
                            </div>
                            <div>
                                <label for="email">E-mail:</label>
                                <input type="email" name="" id="showEmail" disabled>
                            </div>
                            <div>
                                <label for="phone">Número:</label>
                                <input type="text" name="" id="showPhone" minlength="11" maxlength="11" disabled>
                            </div>
                            <div>
                                <label for="post">Tipo do Plano:</label>
                                <input type="text" name="" id="showPost" disabled>
                            </div>
                            <div>
                                <label for="sDate">Data de Nascimento:</label>
                                <input type="date" name="" id="showsDate" disabled>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script src="/js/crud.js"></script>
  </body>
</html>